Here are the reusable OPA policies tailored for AWS VPC resources, structured to evaluate the Terraform `plan.json` output based on the specified operational best practices.

### Reusable OPA Policies for AWS VPC

```rego
package aws.vpc.policies

# 1. Enforce Default Security Group is Closed
deny[msg] {
    resource := input.resource_changes[_]
    resource.type == "aws_vpc"
    resource.change.after.default_security_group_open
    msg = sprintf("Default security group in VPC '%s' is not closed", [resource.change.after.name])
}

# 2. Enforce VPC Flow Logs Enabled
deny[msg] {
    resource := input.resource_changes[_]
    resource.type == "aws_vpc"
    not resource.change.after.enable_flow_logs
    msg = sprintf("VPC '%s' does not have flow logs enabled", [resource.change.after.name])
}

# 3. Enforce Network ACL Unused Check
deny[msg] {
    resource := input.resource_changes[_]
    resource.type == "aws_network_acl"
    resource.change.after.is_used == false
    msg = sprintf("Network ACL '%s' is not in use", [resource.change.after.name])
}

# 4. Enforce VPC Peering DNS Resolution Check
deny[msg] {
    resource := input.resource_changes[_]
    resource.type == "aws_vpc_peering_connection"
    not resource.change.after.allow_dns_resolution
    msg = sprintf("VPC Peering Connection '%s' does not allow DNS resolution", [resource.change.after.name])
}

# 5. Enforce Security Group Open Only to Authorized Ports
deny[msg] {
    resource := input.resource_changes[_]
    resource.type == "aws_security_group"
    resource.change.after.allowed_ports[_] not in ["22", "80", "443"]
    msg = sprintf("Security Group '%s' allows access to unauthorized port '%s'", [resource.change.after.name, resource.change.after.allowed_ports[_]])
}

# 6. Enforce Security Group Port Restriction Check
deny[msg] {
    resource := input.resource_changes[_]
    resource.type == "aws_security_group"
    resource.change.after.allowed_ports[_] == "0"
    msg = sprintf("Security Group '%s' allows traffic on all ports (0)", [resource.change.after.name])
}

# 7. Enforce VPN Tunnels Status Check
deny[msg] {
    resource := input.resource_changes[_]
    resource.type == "aws_vpn_connection"
    count(resource.change.after.tunnel_status) < 2
    msg = sprintf("VPN Connection '%s' does not have both tunnels up", [resource.change.after.name])
}

# Allow if no deny conditions are met
allow {
    not deny[_]
}
```

### Explanation of Policy Structure

- Each policy rule checks a specific compliance requirement related to VPC resources.
- The rules are structured to evaluate the changes described in the `resource_changes` array of the `plan.json` generated by Terraform.
- The `deny` statement is used to generate messages when compliance checks fail.
- The `allow` rule permits the resource changes if no deny conditions are triggered.

### Usage

You can run the evaluation against your `plan.json` output file generated from your Terraform plans. The command would look like this:

```bash
opa eval -i plan.json -d policy.rego "data.aws.vpc.policies.allow"
```

This format allows you to efficiently integrate these VPC policies within your existing Terraform workflows and ensure that VPC configurations comply with established best practices before deployment.
